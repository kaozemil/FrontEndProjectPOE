<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui" xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core"
      xml:lang="en" lang="en">

<h:head>
    <meta name="viewport" content="width-device-width"></meta>
    <link rel="stylesheet" type="text/css" href="poestyles.css"></link>

    <title>Poe Services</title>
</h:head>
<h:body style="background-color: black">
<div class="content">
    <div class="subContent">
    <div>
        <h1 style="padding-top: 1em; padding-left: 1em">Path of Exile Services</h1>
        <hr></hr>
    </div>

    <div style="background-color: black">
        <h:form id="serviceSearch" style="background-color: black">
            <div>
                <p:panel style="background-color: #383838;">
                    <h:panelGrid style="background-color: #383838" width="95%">
                        <p:outputLabel for="League" value="League"></p:outputLabel>
                        <p:selectOneMenu id="League" value="#{endPoint.league}" style="width: 95%">
                            <f:selectItem itemValue="Abyss" itemLabel="Abyss" ></f:selectItem>
                            <f:selectItem itemValue="HardcoreAbyss" itemLabel="Hardcore Abyss"></f:selectItem>
                            <f:selectItem itemValue="Hardcore" itemLabel="Hardcore"></f:selectItem>
                            <f:selectItem itemValue="Standard" itemLabel="Standard"></f:selectItem>
                        </p:selectOneMenu>
                    </h:panelGrid>
                </p:panel>
            </div>

            <div style="background-color: black">
                <p:panel style="background-color: #383838">
                    <h:panelGrid style="background-color: #383838" width="95%">
                        <p:outputLabel for="Service" value="Service"></p:outputLabel>
                        <p:selectOneMenu id="Service" value="#{endPoint.serviceType}" style="width: 95%">
                            <f:selectItem itemValue="Boosting" itemLabel="Boosting" ></f:selectItem>
                            <f:selectItem itemValue="Crafting" itemLabel="Crafting"></f:selectItem>
                            <f:selectItem itemValue="Rotation" itemLabel="Rotation"></f:selectItem>
                            <f:selectItem itemValue="Teaming" itemLabel="Teaming"></f:selectItem>
                        </p:selectOneMenu>
                    </h:panelGrid>
                </p:panel>
            </div>

            <div style="background-color: #1F1F1F">
                <p:commandButton value="Search" action="#{endPoint.loadServices}" update="serviceForm" icon="ui-icon-disc" style="color: gray; margin-left: 2em; margin-top: 1em" ></p:commandButton>
                <hr></hr>
            </div>

        </h:form>

    </div>

    <div>
        <h4 style="padding-left: 1.2em">Want to create your own Service? <a id="showHideCreationDiv" class="grabPromo" >Show</a> </h4>
        <h4 id="createSuccess" style="padding-left: 1.2em; color: green; display: none">&#10003; Created</h4>
        <div id="creationDiv" style="display: none" class="slideDown">

            <div style="background-color: #1F1F1F">
                <h:form>
                    <div class="Container">
                        <div class="FormDiv">
                    <p:panel style="background-color: #383838; ">
                        <h:panelGrid style="background-color: #383838" width="100%">
                            <p:outputLabel for="createService" value="Service"></p:outputLabel>
                            <p:selectOneMenu id="createService" value="#{endPoint.serviceType}" style="width: 37%">
                                <f:selectItem itemValue="Boosting" itemLabel="Boosting" ></f:selectItem>
                                <f:selectItem itemValue="Crafting" itemLabel="Crafting"></f:selectItem>
                                <f:selectItem itemValue="Rotation" itemLabel="Rotation"></f:selectItem>
                                <f:selectItem itemValue="Teaming" itemLabel="Teaming"></f:selectItem>
                            </p:selectOneMenu>
                            <hr></hr>
                            <p:outputLabel for="createLeague" value="League"></p:outputLabel>
                            <p:selectOneMenu id="createLeague" value="#{endPoint.league}" style="width: 37%">
                                <f:selectItem itemValue="Abyss" itemLabel="Abyss" ></f:selectItem>
                                <f:selectItem itemValue="HardcoreAbyss" itemLabel="Hardcore Abyss"></f:selectItem>
                                <f:selectItem itemValue="Hardcore" itemLabel="Hardcore"></f:selectItem>
                                <f:selectItem itemValue="Standard" itemLabel="Standard"></f:selectItem>
                            </p:selectOneMenu>
                        </h:panelGrid>
                    </p:panel>
                    </div>
                        <div class="MenuContainer">
                            <div class="MenuInnards">
                                <p:panel style="background-color: #383838">
                                <p:outputLabel for="titleInput" value="Description:"></p:outputLabel>
                                <h:inputTextarea id="titleInput" value="#{endPoint.title}"></h:inputTextarea>
                                <hr></hr>
                                <p:outputLabel for="inGameNameInput" value="Ingame Name:"></p:outputLabel>
                                <h:inputText id="inGameNameInput" value="#{endPoint.inGameName}"></h:inputText>
                                </p:panel>

                                <p:commandButton class="grabPromo" style="margin-top: 1em; color: gray" id="createButton" value="Create" action="#{endPoint.createService}" onclick="createSuccess()"></p:commandButton>

                            </div>
                        </div>
                    </div>
                </h:form>
            </div>
            <div id="messageDiv" style="display: none">
                <h3 style="padding-left: 2em">[ Please fill out the form! ]</h3>
            </div>

        </div>
        <hr></hr>
    </div>

            <div style="background-color: #1F1F1F" id="resultBox">
                    <h:form id="serviceForm">
                        <h2 style="padding-left: 1em">Available Services // #{endPoint.league} (#{endPoint.results} results)</h2>

                        <p:dataTable id="serviceList" value="#{endPoint.services}" var="currentService" scrollable="true" scrollHeight="211">

                            <p:column headerText="Service">
                                <f:facet name = "Service">Service</f:facet>
                                <h:outputText value="#{currentService.serviceType}"/>
                            </p:column>

                            <p:column headerText="Description">
                                <f:facet name = "Title">Title</f:facet>
                                <h:outputText value="#{currentService.title}"/>
                            </p:column>

                            <p:column headerText="IGN">
                                <f:facet name = "inGameName">IGN</f:facet>
                                <h:outputText id="inGameNameField" value="#{currentService.inGameName}" style="padding-right: 1em;"></h:outputText>
                                <p id="hiddenCopy" style="display: none" >@#{currentService.inGameName} Hi, im responding to your service post, I would like to use/join your #{currentService.serviceType} service in #{currentService.league}.</p>
                                <p:commandButton style="border: hidden; background-color: #a79070; float: right" id="btn" onclick="copyToClipboard('hiddenCopy')" value="Whisper"></p:commandButton>

                            </p:column>
                        </p:dataTable>
                    </h:form>
            </div>


    <script type="text/javascript">
        function copyToClipboard(nameId) {

            // Create a "hidden" input
            var aux = document.createElement("input");

            // Assign it the value of the specified element
            aux.setAttribute("value", document.getElementById(nameId).innerHTML);

            // Append it to the body
            document.body.appendChild(aux);

            // Highlight its content
            aux.select();

            // Copy the highlighted text
            document.execCommand("copy");

            // Remove it from the body
            document.body.removeChild(aux);

        }

        function createSuccess(){
            var cs = document.getElementById('createSuccess');
            cs.style.display = "block";

        }

        jQuery.browser = {};
        (function () {
            jQuery.browser.msie = false;
            jQuery.browser.version = 0;
            if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
                jQuery.browser.msie = true;
                jQuery.browser.version = RegExp.$1;
            }
        })();

        $('.grabPromo').click(function(e){
            $('.slideDown').slideToggle();
            if($('#showHideCreationDiv').innerHTML ="Show") {
                $('#showHideCreationDiv').innerHTML = "Hide";
            }
            else {
                $('#showHideCreationDiv').innerHTML = ""
            }
        });

        $("#createButton").click(function() {
            if ($('#titleInput').val().length == 0) {
                $('#messageDiv').show();
            }
            if ($('#ingamenameinput').val().length == 0) {
                $('#messageDiv').show();
            }
        });
    </script>

    </div>
</div>
        </h:body>


</html>